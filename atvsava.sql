CREATE DATABASE TADS3;
USE TADS3;
--
-- Cria a tabela TIPO
--
CREATE TABLE TIPO (
	CODIGO INTEGER UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,	
	TIPO VARCHAR(32) NOT NULL				
	
);
--
-- cria a tabela Instrutor
--
CREATE TABLE INSTRUTOR (
	CODIGO INTEGER UNSIGNED AUTO_INCREMENT NOT NULL PRIMARY KEY,
    INSTRUTOR VARCHAR(64) NOT NULL,
    TELEFONE VARCHAR(9)
);
--
-- Cria a tabela CURSO
--
CREATE TABLE CURSO (
	CODIGO INTEGER UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,	
	CURSO VARCHAR(64) NOT NULL,				
	TIPO INTEGER UNSIGNED NOT NULL,				
	INSTRUTOR INTEGER UNSIGNED NOT NULL,			
	VALOR DOUBLE NOT NULL,					
	FOREIGN KEY(TIPO) REFERENCES TIPO(CODIGO),		-- Cria o relacionamento (FK) com a tabela TIPO
	FOREIGN KEY(INSTRUTOR) REFERENCES INSTRUTOR(CODIGO)	-- Cria o relacionamento (FK) com a tabela INSTRUTOR
);								
--
-- Cria a tabela ALUNO
--
CREATE TABLE ALUNO (
	CODIGO INTEGER UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,	-- Código interno (PK)
	ALUNO VARCHAR(64) NOT NULL,				-- Nome com até 64 caracteres
	ENDERECO VARCHAR(230) NOT NULL,				-- Endereço com até 230 caracteres
	EMAIL VARCHAR(128) NOT NULL				-- E-mail com até 128 caracteres
);
--
-- Cria a tabela PEDIDO
--
CREATE TABLE PEDIDO (
	CODIGO INTEGER UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY,	-- Código interno (PK)
	ALUNO INTEGER UNSIGNED NOT NULL,			-- Código do aluno (idêntico a PK em ALUNO)
	DATAHORA DATETIME NOT NULL,				-- Armazena data e hora em uma única coluna
	FOREIGN KEY(ALUNO) REFERENCES ALUNO(CODIGO)		-- Cria o relacionamento (FK) com a tabela ALUNO
);

--
-- Cria a tabela PEDIDO_DETALHE
--
CREATE TABLE PEDIDO_DETALHE (
	PEDIDO INTEGER UNSIGNED NOT NULL PRIMARY KEY,			-- Código do pedido (idêntico a PK em PEDIDO)
	CURSO INTEGER UNSIGNED NOT NULL,			-- Código do curso (idêntico a PK em CURSO)
	VALOR DOUBLE NOT NULL,					-- Valor do curso
	FOREIGN KEY(PEDIDO) REFERENCES PEDIDO(CODIGO),		-- Cria o relacionamento (FK) com a tabela PEDIDO
	FOREIGN KEY(CURSO) REFERENCES CURSO(CODIGO)		-- Cria o relacionamento (FK) com a tabela CURSO
);

SHOW TABLES;

ALTER TABLE ALUNO ADD DATA_NASCIMENTO VARCHAR(10);

ALTER TABLE ALUNO CHANGE DATA_NASCIMENTO NASCIMENTO DATE NULL;


ALTER TABLE ALUNO ADD INDEX INDEX_ALUNO(ALUNO);

ALTER TABLE INSTRUTOR ADD EMAIL VARCHAR(100);

ALTER TABLE CURSO ADD INDEX INDEX_INSTRUTOR(INSTRUTOR);

--
-- INSERINDO DADOS NAS TABELAS
-- POPULUANDO
-- 
-- POPULANDO TIPOS
INSERT INTO TIPO (CODIGO, TIPO) VALUES (1, "Banco de Dados");
INSERT INTO TIPO VALUES (2, 'Programação');
INSERT INTO TIPO VALUES (3, 'Modelagem de dados');


-- POPULANDO OS INSTRUTORES

INSERT INTO INSTRUTOR (INSTRUTOR, TELEFONE) VALUES ("Andre Milani", "1111-1111");
INSERT INTO INSTRUTOR (INSTRUTOR, TELEFONE) VALUES ("Carlos Tosin", "1212-1212");
select * from instrutor;

-- POPULANDO A TABELA CURSO

INSERT INTO CURSO VALUES (1,'Java Fundamentos', 2, 2, 270);
INSERT INTO CURSO VALUES (2,'Java Avançado', 2, 2, 330);
INSERT INTO CURSO VALUES (3,'SQL Completo', 1, 1, 170);
INSERT INTO CURSO VALUES (4,'Php Básico', 2, 1, 270);


INSERT INTO ALUNO VALUES (1, 'José','Rua XV de Novembro 72', 'jose@tads3.com.br');
INSERT INTO ALUNO VALUES (2, "Wargner","Av. Paulista", "wagner@tads3.com.br");
INSERT INTO ALUNO VALUES (3, "Emilio"," Rua Lajes 103, ap: 701", "emilio@tads3.com.br");
INSERT INTO ALUNO VALUES (4, "Cris","Rua Tauney 22", "cris@tads3.com.br");
INSERT INTO ALUNO VALUES (5, "Regina","Rua Salles 305","regina@tads3.com.br");
INSERT INTO ALUNO VALUES (6, "Fernando","Av. Central 30", "fernando@tads3.com.br");

INSERT INTO PEDIDO VALUES (1, 2, 15/04/2010, '11:23:32');
INSERT INTO PEDIDO VALUES (2, 2, 15/04/2010, '14:36:21' );
INSERT INTO PEDIDO VALUES (3, 3, 16/04/2010, '11:17:45' );
INSERT INTO PEDIDO VALUES (4, 4, 17/04/2010, '14:27:22');
INSERT INTO PEDIDO VALUES (5, 5, 18/04/2010, '11:18:19');
INSERT INTO PEDIDO VALUES (6, 6, 19/04/2010, '13:47:35' );
INSERT INTO PEDIDO VALUES (7, 6, 20/04/2010, '18:13:44');


INSERT INTO PEDIDO_DETALHE VALUES (1, 1, 270);
INSERT INTO PEDIDO_DETALHE VALUES (1, 2, 330);
INSERT INTO PEDIDO_DETALHE VALUES (2, 1, 270);
INSERT INTO PEDIDO_DETALHE VALUES (2, 2, 330);
INSERT INTO PEDIDO_DETALHE VALUES (2, 3, 170);
INSERT INTO PEDIDO_DETALHE VALUES (3, 4, 270);
INSERT INTO PEDIDO_DETALHE VALUES (4, 2, 330);
INSERT INTO PEDIDO_DETALHE VALUES (4, 4, 270);
INSERT INTO PEDIDO_DETALHE VALUES (5, 3, 170);
INSERT INTO PEDIDO_DETALHE VALUES (6, 3, 170);
INSERT INTO PEDIDO_DETALHE VALUES (7, 4, 270);

select * from ALUNO;

select * from CURSO where CURSO;

select CURSO, VALOR from CURSO where VALOR >=200;

select CURSO, VALOR from CURSO where VALOR >=200 and VALOR <300;

select * from PEDIDO where DATAHORA =15/04/2010 and DATAHORA =18/04/2010;

select * from PEDIDO where DATAHORA = 15/04/2010;


UPDATE ALUNO SET ENDERECO = 'Av. Brasil 778' WHERE ID = 1;
UPDATE ALUNO SET EMAIL ='cristiano@tads3.com.br' WHERE ID = 4;

UPDATE CURSO SET NOME = PHP_FUNDAMENTO WHERE ID = 4;